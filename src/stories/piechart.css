/* PieChart Component Styles */

/* CSS Custom Properties */
:root {
  --piechart-background-color: #E2E8F0;
  --piechart-inner-background: #FFFFFF;
  --piechart-legend-gap: 8px;
  --piechart-legend-item-gap: 4px;
  --piechart-legend-dot-size: 8px;
  --piechart-legend-font-size: 14px;
  --piechart-legend-line-height: 20px;
  --piechart-legend-color: #535862;
  --piechart-animation-duration: 300ms;
  --piechart-animation-easing: ease-out;
}

/* Base PieChart Container */
.piechart {
  display: flex;
  align-items: flex-start;
  gap: var(--piechart-legend-gap);
  font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  position: relative;
}

/* Size Variants */
.piechart--xxs {
  --piechart-size: 120px;
  --piechart-legend-font-size: 12px;
  --piechart-legend-line-height: 16px;
}

.piechart--xs {
  --piechart-size: 160px;
  --piechart-legend-font-size: 14px;
  --piechart-legend-line-height: 20px;
}

.piechart--sm {
  --piechart-size: 200px;
  --piechart-legend-font-size: 14px;
  --piechart-legend-line-height: 20px;
}

.piechart--md {
  --piechart-size: 240px;
  --piechart-legend-font-size: 14px;
  --piechart-legend-line-height: 20px;
}

.piechart--lg {
  --piechart-size: 280px;
  --piechart-legend-font-size: 16px;
  --piechart-legend-line-height: 24px;
}

/* Layout Variants with Legend */
.piechart--with-legend.piechart--legend-right {
  flex-direction: row;
  align-items: flex-start;
}

.piechart--with-legend.piechart--legend-bottom {
  flex-direction: column;
  align-items: flex-start;
}

/* Chart Container */
.piechart-chart-container {
  position: relative;
  flex-shrink: 0;
}

.piechart-svg {
  display: block;
  width: var(--piechart-size);
  height: var(--piechart-size);
  overflow: visible;
}

/* Chart Elements */
.piechart-background {
  transition: fill var(--piechart-animation-duration) var(--piechart-animation-easing);
}

.piechart-inner-background {
  transition: fill var(--piechart-animation-duration) var(--piechart-animation-easing);
}

.piechart-slice {
  transition: all var(--piechart-animation-duration) var(--piechart-animation-easing);
  transform-origin: center;
  animation: piechartSliceIn var(--piechart-animation-duration) var(--piechart-animation-easing) both;
  cursor: pointer;
}

.piechart-slice:hover {
  filter: brightness(1.1);
  transform: scale(1.02);
}

.piechart-slice:focus {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
}

/* Center Content */
.piechart-center-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  pointer-events: none;
  z-index: 1;
}

/* Legend Styles */
.piechart-legend {
  display: flex;
  flex-direction: column;
  gap: var(--piechart-legend-item-gap);
  min-width: 0;
  flex: 1;
}

.piechart-legend--right {
  align-items: flex-start;
  justify-content: flex-start;
  padding-top: 6px;
}

.piechart-legend--bottom {
  flex-direction: row;
  flex-wrap: wrap;
  gap: 16px 24px;
  margin-top: 16px;
}

/* Legend Items */
.piechart-legend-item {
  display: flex;
  align-items: center;
  gap: var(--piechart-legend-gap);
  min-width: 0;
  cursor: pointer;
  transition: opacity var(--piechart-animation-duration) var(--piechart-animation-easing);
}

.piechart-legend-item:hover {
  opacity: 0.8;
}

.piechart-legend-item:focus {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Legend Dots */
.piechart-legend-dot {
  width: var(--piechart-legend-dot-size);
  height: var(--piechart-legend-dot-size);
  border-radius: 50%;
  flex-shrink: 0;
  margin-top: 6px;
  transition: transform var(--piechart-animation-duration) var(--piechart-animation-easing);
}

.piechart-legend-item:hover .piechart-legend-dot {
  transform: scale(1.2);
}

/* Legend Labels */
.piechart-legend-label {
  color: var(--piechart-legend-color);
  font-size: var(--piechart-legend-font-size);
  font-weight: 400;
  line-height: var(--piechart-legend-line-height);
  min-width: 0;
  flex: 1;
}

/* Empty State */
.piechart--empty {
  justify-content: center;
  align-items: center;
  min-height: var(--piechart-size);
}

.piechart-empty-message {
  color: var(--piechart-legend-color);
  font-size: var(--piechart-legend-font-size);
  text-align: center;
  opacity: 0.6;
}

/* Animations */
@keyframes piechartSliceIn {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

@keyframes piechartFadeIn {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.piechart-legend-item {
  animation: piechartFadeIn var(--piechart-animation-duration) var(--piechart-animation-easing) both;
}

/* Responsive Design */
@media (max-width: 768px) {
  .piechart--with-legend.piechart--legend-right {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .piechart-legend--right {
    flex-direction: row;
    flex-wrap: wrap;
    gap: 12px 16px;
    margin-top: 12px;
    padding-top: 0;
  }

  .piechart--xxs,
  .piechart--xs {
    --piechart-legend-font-size: 12px;
    --piechart-legend-line-height: 16px;
  }
}

@media (max-width: 480px) {
  .piechart {
    --piechart-legend-gap: 6px;
    --piechart-legend-item-gap: 2px;
  }
  
  .piechart-legend--bottom {
    gap: 8px 12px;
    margin-top: 12px;
  }
  
  .piechart--lg {
    --piechart-size: 240px;
  }
  
  .piechart--md {
    --piechart-size: 200px;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .piechart-slice {
    stroke: #000000;
    stroke-width: 1px;
  }
  
  .piechart-legend-dot {
    border: 1px solid #000000;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .piechart-slice,
  .piechart-legend-item,
  .piechart-legend-dot,
  .piechart-background,
  .piechart-inner-background {
    animation: none;
    transition: none;
  }
}

/* Dark Theme Support */
@media (prefers-color-scheme: dark) {
  :root {
    --piechart-background-color: #374151;
    --piechart-inner-background: #1F2937;
    --piechart-legend-color: #E5E7EB;
  }
}

/* Print Styles */
@media print {
  .piechart-slice:hover {
    filter: none;
    transform: none;
  }
  
  .piechart-legend-item:hover {
    opacity: 1;
  }
  
  .piechart-legend-item:hover .piechart-legend-dot {
    transform: none;
  }
}

/* Focus Styles for Accessibility */
.piechart-slice:focus-visible {
  outline: 3px solid #3B82F6;
  outline-offset: 2px;
}

.piechart-legend-item:focus-visible {
  outline: 2px solid #3B82F6;
  outline-offset: 2px;
  border-radius: 4px;
}

/* Loading State */
.piechart--loading .piechart-slice {
  animation: piechartPulse 1.5s ease-in-out infinite;
}

@keyframes piechartPulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

/* Interactive States */
.piechart-slice[aria-selected="true"] {
  filter: brightness(1.2);
  transform: scale(1.05);
}

.piechart-legend-item[aria-selected="true"] {
  font-weight: 600;
}

.piechart-legend-item[aria-selected="true"] .piechart-legend-dot {
  transform: scale(1.3);
  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
}

/* Custom Properties for Theming */
.piechart[data-theme="brand"] {
  --piechart-background-color: #F1F5F9;
  --piechart-inner-background: #FFFFFF;
  --piechart-legend-color: #334155;
}

.piechart[data-theme="minimal"] {
  --piechart-background-color: #F8FAFC;
  --piechart-inner-background: #FFFFFF;
  --piechart-legend-color: #64748B;
}

/* Tooltip Support */
.piechart-slice[data-tooltip] {
  cursor: help;
}

/* RTL Support */
[dir="rtl"] .piechart--with-legend.piechart--legend-right {
  flex-direction: row-reverse;
}

[dir="rtl"] .piechart-legend-item {
  flex-direction: row-reverse;
}
